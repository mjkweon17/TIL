### SQLite
- 파일 기반의 경량화된 데이터베이스 관리 시스템
- 서버를 설치할 필요 없이 SQL(Structured Query Language)을 사용해 데이터를 관리할 수 있게 해줌.
- 많은 웹 브라우저, 운영 체제, 모바일 애플리케이션 등에서 널리 사용되고 있음.

### 주요특징
- 서버리스: SQLite는 서버를 필요로 하지 않음. 데이터베이스 파일에 직접 액세스하여 작업
- 경량: SQLite는 매우 작은 양의 리소스만을 사용하면서도 효율적으로 동작
- 자체 포함: SQL 데이터베이스 엔진이 외부의 의존성 없이 자체적으로 완전히 동작
- 트랜잭션 지원: ACID(Atomicity, Consistency, Isolation, Durability) 트랜잭션을 완전히 지원
- 다양한 언어 지원: C, Python, PHP 등 다양한 프로그래밍 언어에서 사용할 수 있음
- SQLite는 그 사용의 간편함과 효율성 때문에, 로컬 스토리지가 필요한 애플리케이션, 프로토타입 개발, 경량 애플리케이션, 교육용도 등에서 매우 유용하게 사용됨

### SQLite의 장점
- 경량: 서버가 필요 없고, 간단한 설정과 함께 사용할 수 있어 작은 애플리케이션 또는 프로토타이핑에 이상적
- 휴대성: 단일 데이터베이스 파일로 구성되어 있어, 쉽게 복사하거나 이동할 수 있음
- 서버리스: 별도의 서버 프로세스 없이 애플리케이션에 직접 내장되어 운영되므로, 복잡한 데이터베이스 서버 구성이나 관리가 필요 없음.
- 다중 액세스: 동시성은 제한적이지만, 작은 규모의 애플리케이션에서는 여러 사용자의 액세스를 충분히 처리할 수 있음.
- 광범위한 언어 지원: 대부분의 프로그래밍 언어에서 지원되므로, 다양한 언어로 작성된 애플리케이션에 쉽게 통합할 수 있음

### SQLite의 제한사항

- 동시성: SQLite는 고동시성을 필요로 하는 애플리케이션에는 적합하지 않음. 동시에 많은 수의 사용자가 데이터베이스에 쓰려고 할 때 성능이 저하될 수 있음.
- 대용량 데이터: 대용량 데이터를 처리하거나 매우 복잡한 쿼리를 실행해야 하는 애플리케이션의 경우, SQLite의 성능이 제한적일 수 있음
- 고급 기능 부족: 복제, 클러스터링, 또는 복잡한 트랜잭션 관리와 같은 고급 데이터베이스 관리 기능을 지원하지 않음.

### 적합한 사용 사례

- 개발 및 테스팅: 개발 초기 단계나 단위 테스트를 위해 사용하기에 적합
- 임베디드 애플리케이션 및 모바일 애플리케이션**: 리소스가 제한된 환경에서 운영되는 애플리케이션에 적합
- 작은 규모의 웹 사이트: 저동시성 요구와 작은 데이터 세트를 가진 소규모 웹 사이트에 적합
- 단일 사용자 애플리케이션: 한 번에 한 명의 사용자만 액세스하는 데스크톱 애플리케이션에 적합

### CI/CD 구성할 때 주의사항
- 상황: GitHub Actions를 사용하여 Docker 이미지로 빌드한 후 Amazon ECR(Elastic Container Registry)에 푸시하고, 이후에 EC2(Elastic Compute Cloud)에서 해당 이미지를 풀하여 실행하는 CI/CD 파이프라인
- SQLite는 파일 기반의 데이터베이스이므로, 데이터베이스 파일을 관리하는 방법에 주의해야 함.
1. Docker 이미지 내에 SQLite 데이터베이스 포함: SQLite 데이터베이스 파일을 Docker 이미지 내부에 포함시키는 방법이 가장 간단할 수 있음. 이 경우, 이미지를 빌드할 때 데이터베이스 파일도 함께 빌드에 포함되며, 컨테이너가 시작될 때 이미지 내의 데이터베이스 파일을 사용하게 됨. 하지만 이 방법은 데이터의 지속성(persistence)을 보장하지 못함. 컨테이너가 재시작되거나 새로운 이미지로 업데이트될 때 데이터베이스 내용이 사라질 수 있음.
2. 볼륨을 사용한 데이터 지속성 보장: 데이터의 지속성을 보장하기 위해, Docker 컨테이너와 호스트 시스템 간에 볼륨을 마운트하는 방법을 사용할 수 있음. 이 방법을 사용하면, 데이터베이스 파일이 호스트 시스템의 파일 시스템에 저장되므로, 컨테이너가 삭제되거나 업데이트되어도 데이터는 유지됨. Docker 실행 명령에 볼륨 마운트 옵션을 추가하여 이를 구현할 수 있음.
   예를 들어, EC2 인스턴스에서 컨테이너를 실행할 때 다음과 같은 명령어를 사용할 수 있음:
   ```bash
   docker run -v /path/on/host:/path/in/container image_name
   ```
   여기서 `/path/on/host`는 EC2 인스턴스 내의 데이터베이스 파일을 저장할 경로이고, `/path/in/container`는 컨테이너 내에서 해당 데이터베이스 파일에 접근하기 위한 경로임. 이 방법을 사용하면, 컨테이너 내의 애플리케이션이 SQLite 데이터베이스 파일을 지속적으로 사용할 수 있음.
3. EC2 인스턴스의 백업 및 복구 계획 수립: 데이터의 지속성과 안전성을 위해, EC2 인스턴스 또는 볼륨의 백업을 정기적으로 수행하는 것이 좋음. AWS의 스냅샷 기능을 사용하여 이를 수행할 수 있음. 이를 통해 데이터 손실이 발생했을 때 데이터베이스를 쉽게 복구할 수 있음.
- SQLite를 사용할 때 데이터의 지속성을 확보하는 것은 매우 중요. 따라서, 볼륨을 사용하여 데이터를 영구적으로 저장하고, 정기적인 백업으로 데이터의 안전을 보장하는 것이 좋음.

### FastAPI 예제
- 데이터는 example.db라는 이름의 SQLite 데이터베이스 파일에 저장됨. SQLite는 서버리스 데이터베이스로 작동하며, 모든 데이터를 파일 시스템에 파일 형태로 저장함. 따라서, 이 예제에서는 Python 스크립트가 실행되는 동일한 디렉토리 내에 example.db 파일이 생성되고, 이 파일 안에 모든 데이터베이스 테이블과 데이터가 저장됨.
- SQLite 데이터베이스 파일은 단일 파일로, 데이터베이스와 관련된 모든 것을 포함함. 예를 들어, 테이블, 인덱스, 트리거, 데이터 등이 모두 이 파일 내에 저장됨. 파일 기반의 특성 때문에 SQLite는 데이터베이스를 손쉽게 복사하거나 이동할 수 있으며, 외부 서버 없이 로컬 또는 임베디드 애플리케이션에서 데이터를 관리할 수 있는 효율적인 방법을 제공함.
- get_db_connection 함수에서 sqlite3.connect('example.db')를 호출할 때, 지정된 이름의 데이터베이스 파일이 이미 존재하지 않으면 새 파일이 생성됨. 이미 파일이 존재한다면, 해당 파일에 저장된 데이터베이스에 연결됨.